(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{618:function(s,e,a){"use strict";a.r(e);var t=a(4),r=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("不知道小伙伴有没有这种体验，开发的某个功能上线后出现了问题，简单排查后定位到了某个时间；但是一打开日志，脑袋就嗡嗡的。瞬间连看的欲望都没有了，别说排查了，这时候就可以用到"),a("strong",[s._v("grep")]),s._v("命令了。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=884636525,2457709528&fm=26&gp=0.jpg",alt:"点击查看源网页"}})]),s._v(" "),a("p",[s._v("承上文，我们知道了错误时间")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -n "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'17/May/2020:09:33:57 +0800'")]),s._v(" *.log\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("结果")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('552:119.254.228.148 - - [17/May/2020:09:33:57 +0800] "GET /favicon.ico HTTP/1.1" 404 -\n553:122.117.156.223 - - [17/May/2020:09:33:57 +0800] "GET / HTTP/1.1" 400 285\n554:122.117.156.223 - - [17/May/2020:09:33:57 +0800] "GET / HTTP/1.1" 400 285\n555:122.117.156.223 - - [17/May/2020:09:33:57 +0800] "GET / HTTP/1.1" 400 285\n556:122.117.156.223 - - [17/May/2020:09:33:57 +0800] "GET / HTTP/1.1" 400 285\n557:122.117.156.223 - - [17/May/2020:09:33:57 +0800] "-" 408 -\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("这样我们就可以迅速解决问题。")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"关于grep命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于grep命令"}},[s._v("#")]),s._v(" 关于grep命令")]),s._v(" "),a("p",[a("strong",[s._v("Linux grep")]),s._v("命令用于查找文件里符合条件的字符串。")]),s._v(" "),a("p",[s._v("Linux系统中"),a("strong",[s._v("grep")]),s._v("命令是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹 配的行打印出来。"),a("strong",[s._v("grep")]),s._v("全称是"),a("strong",[s._v("Global Regular Expression Print")]),s._v("，表示全局正则表达式版本，它的使用权限是所有用户。")]),s._v(" "),a("p",[a("strong",[s._v("grep")]),s._v(" 指令用于查找内容包含指定的范本样式的文件，如果发现某文件的内容符合所指定的范本样式，预设 "),a("strong",[s._v("grep")]),s._v(" 指令会把含有范本样式的那一列显示出来。若不指定任何文件名称，或是所给予的文件名为"),a("code",[s._v("-")]),s._v("，则 **grep **指令会从标准输入设备读取数据。")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"使用格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用格式"}},[s._v("#")]),s._v(" 使用格式")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" pattern "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"options-的主要参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options-的主要参数"}},[s._v("#")]),s._v(" [options]的主要参数")]),s._v(" "),a("blockquote",[a("p",[s._v("参数较多 建议耐心阅读哦")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("-a 或 –text : 不要忽略二进制的数据")])]),s._v(" "),a("li",[a("p",[s._v("-A<显示行数> 或 –after-context=<显示行数> : 除了显示符合范本样式的那一列之外，并显示该行之后的内容")])]),s._v(" "),a("li",[a("p",[s._v("-b 或 –byte-offset : 在显示符合样式的那一行之前，标示出该行第一个字符的编号")])]),s._v(" "),a("li",[a("p",[s._v("-B<显示行数> 或 –before-context=<显示行数> : 除了显示符合样式的那一行之外，并显示该行之前的内容")])]),s._v(" "),a("li",[a("p",[s._v("-c 或 –count : 计算符合样式的列数")])]),s._v(" "),a("li",[a("p",[s._v("-C<显示行数> 或 –context=<显示行数>或-<显示行数> : 除了显示符合样式的那一行之外，并显示该行之前后的内容")])]),s._v(" "),a("li",[a("p",[s._v("-d <动作> 或 –directories=<动作> : 当指定要查找的是目录而非文件时，必须使用这项参数，否则grep指令将回报信息并停止动作")])]),s._v(" "),a("li",[a("p",[s._v("-e<范本样式> 或 –regexp=<范本样式> : 指定字符串做为查找文件内容的样式")])]),s._v(" "),a("li",[a("p",[s._v("-E 或 –extended-regexp : 将样式为延伸的普通表示法来使用")])]),s._v(" "),a("li",[a("p",[s._v("-f<规则文件> 或 –file=<规则文件> : 指定规则文件，其内容含有一个或多个规则样式，让grep查找符合规则条件的文件内容，格式为每行一个规则样式")])]),s._v(" "),a("li",[a("p",[s._v("-F 或 –fixed-regexp : 将样式视为固定字符串的列表")])]),s._v(" "),a("li",[a("p",[s._v("-G 或 –basic-regexp : 将样式视为普通的表示法来使用。")])]),s._v(" "),a("li",[a("p",[s._v("-h 或 –no-filename : 在显示符合样式的那一行之前，不标示该行所属的文件名称")])]),s._v(" "),a("li",[a("p",[s._v("-H 或 –with-filename : 在显示符合样式的那一行之前，表示该行所属的文件名称")])]),s._v(" "),a("li",[a("p",[s._v("-i 或 –ignore-case : 忽略字符大小写的差别")])]),s._v(" "),a("li",[a("p",[s._v("-l 或 –file-with-matches : 列出文件内容符合指定的样式的文件名称")])]),s._v(" "),a("li",[a("p",[s._v("-L 或 –files-without-match : 列出文件内容不符合指定的样式的文件名称")])]),s._v(" "),a("li",[a("p",[s._v("-n 或 –line-number : 在显示符合样式的那一行之前，标示出该行的列数编号")])]),s._v(" "),a("li",[a("p",[s._v("-o 或 –only-matching : 只显示匹配PATTERN 部分")])]),s._v(" "),a("li",[a("p",[s._v("-q 或 –quiet或–silent : 不显示任何信息")])]),s._v(" "),a("li",[a("p",[s._v("-r 或 –recursive : 此参数的效果和指定”-d recurse”参数相同")])]),s._v(" "),a("li",[a("p",[s._v("-s 或 –no-messages : 不显示错误信息")])]),s._v(" "),a("li",[a("p",[s._v("-v 或 –revert-match : 显示不包含匹配文本的所有行")])]),s._v(" "),a("li",[a("p",[s._v("-V 或 –version : 显示版本信息")])]),s._v(" "),a("li",[a("p",[s._v("-w 或 –word-regexp : 只显示全字符合的列")])]),s._v(" "),a("li",[a("p",[s._v("-x –line-regexp : 只显示全列符合的列")])]),s._v(" "),a("li",[a("p",[s._v("-y : 此参数的效果和指定”-i”参数相同")])]),s._v(" "),a("li",[a("p",[s._v("-?：同时显示匹配行上下的？行，如：grep -2 pattern filename同时显示匹配行的上下2行")]),s._v(" "),a("blockquote",[a("p",[s._v("假装是一条分割线")])])])]),s._v(" "),a("h3",{attrs:{id:"pattern正则表达式的主要参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pattern正则表达式的主要参数"}},[s._v("#")]),s._v(" pattern正则表达式的主要参数")]),s._v(" "),a("ul",[a("li",[s._v(":忽略正则表达式中特殊字符的原含义")]),s._v(" "),a("li",[s._v("^:匹配正则表达式的开始行")]),s._v(" "),a("li",[s._v("$:匹配正则表达式的结束行")]),s._v(" "),a("li",[s._v("<:从匹配正则表达式的行开始")]),s._v(" "),a("li",[s._v(">:到匹配正则表达式的行结束")]),s._v(" "),a("li",[s._v("[]：单个字符，如[A]即A符合要求")]),s._v(" "),a("li",[s._v("[-] 范围，如[A-Z],即A、B、C一直到Z都符合要求")]),s._v(" "),a("li",[s._v(".：所有的单个字符")]),s._v(" "),a("li",[s._v("*：有字符，长度可以为0")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[s._v("#")]),s._v(" 例子")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("从根目录开始查找所有扩展名为.log的文本文件，并找出其中包含“ERROR”的行")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / -type f -name "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.log"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ERROR"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查找时不确定大小写（即不区分大小写）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error"')]),s._v(" *.log\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("完全匹配关键词 -w")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -w "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error'")]),s._v(" *.log\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("过滤出以“error” 开头的行，并显示行号")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -n "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'^error'")]),s._v(" *.log\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("搜索结果中排除某个文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -n "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error'")]),s._v(" *.log --exclude "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"access.log"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("搜索多文本 加入管道符即可 "),a("code",[s._v("|")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -E "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root|deng"')]),s._v(" *.log\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("使用管道符"),a("code",[s._v("|")]),s._v("可以和其他命令一起使用")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -n "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" error.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ERROR"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[s._v("#")]),s._v(" 其他")]),s._v(" "),a("p",[a("strong",[s._v("grep")]),s._v("还有两个兄弟："),a("strong",[s._v("egrp")]),s._v("和"),a("strong",[s._v("fgrep")])]),s._v(" "),a("ol",[a("li",[a("p",[a("strong",[s._v("egrep")]),s._v('执行效果和"grep-E"相似，使用的语法及参数可参照grep指令，与grep的不同点在于解读字符串的方法。')]),s._v(" "),a("p",[s._v("egrep是用extended regular expression语法来解读的，而grep则用basic regular expression 语法解读，extended regular expression比basic regular expression的表达更规范")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("fgrep")]),s._v("命令用于查找文件里符合条件的字符串")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);